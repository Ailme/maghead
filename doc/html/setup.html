<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
        body { 
        padding: 15px 30px; 
        background-color: #ccc;
        font-family: sans-serif;
    }
    a { color: blue; }
    h1, h2, h3, h4 { 
        color: #232323;
        text-shadow: #ddd 1px 1px 1px;
    }
    p { 
        color: #333;
        text-shadow: #ccc 1px 1px 1px;
    }
    pre { 
        background: #ddd;
        border-radius: 10px;
        border: 1px solid #999;
        box-shadow: #666 -2px -2px 5px;
        padding: 10px;
    }
    code { 
        font-family: Monaco, Monospace, Courier New;
        font-size: 0.8em;
    }
    table { background: #aaa; }
    table td { 
        background: #eee; 
        color: #111;
        padding: 3px 6px;
        min-width: 200px;
    }
    </style>
</head>
<body>
<h1>Setup</h1>

<h2>Install</h2>

<p>use git to clone this repository, then</p>

<p>use PEAR to install this package:</p>

<pre><code>$ onion build
$ pear install -f package.xml
</code></pre>

<p>Make sure that your have <code>lazy</code> binary in your path:</p>

<pre><code>$ which lazy
</code></pre>

<h2>Setup for LazyRecord development</h2>

<p>Copy testing env config file:</p>

<pre><code>$ cp config/database.yml.testing config/database.yml
</code></pre>

<p>Create MySql database <code>lazy_test</code>:</p>

<pre><code>$ mysql -uroot -p
&gt; create database lazy_test charset utf8;
</code></pre>

<p>Create PgSQL database <code>lazy_test</code>:</p>

<pre><code>$ createuser --pwprompt lazy
$ createdb --owner lazy lazy_test
</code></pre>

<p>Modify/Update database config file:</p>

<pre><code>$ vim config/database.yml
</code></pre>

<p>Build config file:</p>

<pre><code>$ lazy build-conf config/database.yml
</code></pre>

<p>Run phpunit to test:</p>

<pre><code>$ phpunit tests
</code></pre>

<h1>Setup for your application</h1>

<h2>Create config file</h2>

<p>Navigate to your application dir, put your configuration file in <code>config/database.yml</code> file:</p>

<pre><code>---
schema:
  paths:
    - path/to/schema
data_sources:
  default:
    dsn: 'sqlite:tests.db'
</code></pre>

<p>configure your data source:</p>

<p>DSN for mysql:</p>

<pre><code>default:
  dsn: 'mysql:host=localhost;dbname=test_db'
  user: root
  pass: 123123
</code></pre>

<p>DSN for SQLite:</p>

<pre><code>default:
  dsn: 'sqlite:tests.db'
</code></pre>

<p>DSN for SQLite in memory:</p>

<pre><code>default:
  dsn: 'sqlite::memory:'
</code></pre>

<p>DSN for pgsql:</p>

<pre><code>default:
  dsn: 'pgsql:host=localhost;dbname=test_db'
  user: root
  pass: 123123
</code></pre>

<h2>Compile your config file</h2>

<pre><code>$ lazy build-conf config/database.yml
</code></pre>

<p>This will create:</p>

<pre><code>config/database.yaml.php
.lazy.php (symlink)
</code></pre>

<h2>Build or Update schema files</h2>

<pre><code>$ lazy build-schema
</code></pre>

<h2>Build SQL</h2>

<pre><code>$ lazy build-sql
</code></pre>

</body>
</html>