<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
    body { 
        padding: 15px 30px; 
        background-color: #ccc;
        font-family: sans-serif;
    }
    a { color: blue; }
    h1, h2, h3, h4 { 
        color: #232323;
        text-shadow: #ddd 1px 1px 1px;
    }
    p { 
        color: #333;
        text-shadow: #ccc 1px 1px 1px;
    }
    pre { 
        background: #ddd;
        border-radius: 10px;
        border: 1px solid #999;
        box-shadow: #666 -2px -2px 5px;
        padding: 10px;
    }
    code { 
        font-family: Monaco, Monospace, Courier New;
        font-size: 0.8em;
    }
    </style>
</head>
<body>
<h1>Development</h1>

<h2>Install Bundles</h2>

<p>Use Onion to install dependent libraries</p>

<pre><code>$ onion -d bundle
</code></pre>

<h2>Setup for LazyRecord development</h2>

<p>Copy testing env config file:</p>

<pre><code>$ cp config/database.yml.testing config/database.yml
</code></pre>

<p>Create MySql database <code>lazy_test</code>:</p>

<pre><code>$ mysql -uroot -p
&gt; create database lazy_test charset utf8;
</code></pre>

<p>Create PgSQL database <code>lazy_test</code>:</p>

<pre><code>$ createuser --pwprompt lazy
$ createdb --owner lazy lazy_test
</code></pre>

<p>Modify/Update database config file:</p>

<pre><code>$ vim config/database.yml
</code></pre>

<p>Build config file:</p>

<pre><code>$ lazy build-conf config/database.yml
</code></pre>

<p>Run phpunit to test:</p>

<pre><code>$ phpunit tests
</code></pre>

<p>When tests rans successful, you can run the below script to compile library
files into the executable phar file <code>lazy</code>:</p>

<pre><code>$ bash scripts/compile.sh
</code></pre>

<p>To build sql with specific data source:</p>

<pre><code>php scripts/lazy.php build-sql --data-source=mysql  --rebuild
php scripts/lazy.php build-sql --data-source=master --rebuild
php scripts/lazy.php build-sql --data-source=slave  --rebuild
</code></pre>

</body>
</html>