<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
        body { 
        padding: 15px 30px; 
        background-color: #ccc;
        font-family: sans-serif;
    }
    a { color: blue; }
    h1, h2, h3, h4 { 
        color: #232323;
        text-shadow: #ddd 1px 1px 1px;
    }
    p { 
        color: #333;
        text-shadow: #ccc 1px 1px 1px;
    }
    pre { 
        background: #ddd;
        border-radius: 10px;
        border: 1px solid #999;
        box-shadow: #666 -2px -2px 5px;
        padding: 10px;
    }
    code { 
        font-family: Monaco, Monospace, Courier New;
        font-size: 0.8em;
    }
    table { background: #aaa; }
    table td { 
        background: #eee; 
        color: #111;
        padding: 3px 6px;
        min-width: 200px;
    }
    </style>
</head>
<body>
<h1>Model</h1>

<h2>Create</h2>

<pre><code>&lt;?php
$author = new Author;
$ret = $author-&gt;create(array(
    'name' =&gt; 'Foo'
));
?&gt;
</code></pre>

<p><code>$ret</code> is an operation result, you can check if this operation succeed.</p>

<p>To check status:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">success&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;record&nbsp;created<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exception</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;exception<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sql</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;sql&nbsp;statement<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">vars&nbsp;</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;variables&nbsp;that&nbsp;applied&nbsp;for&nbsp;PDO<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<h2>Load</h2>

<p>Load record with primary key through constructor:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$author&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Author</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<p>Load record with hash through constructor:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$author&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Author</span><span style="color: #007700">(&nbsp;array(&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'John'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<p>use load method to load record:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$author</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(&nbsp;array(&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'John'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<h2>Update</h2>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$author</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Mary'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<h2>Delete</h2>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$author</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$author</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<h1>Static Helper Functions</h1>

<h2>Create</h2>

<pre><code>&lt;?php
$record = \tests\Author::create(array( 
    'name' =&gt; 'Mary',
    'email' =&gt; 'zz@zz',
    'identity' =&gt; 'zz',
));
?&gt;
</code></pre>

<h2>Load</h2>

<pre><code>    $record = \tests\Author::load( 1 );
    $record = \tests\Author::load( array( 'id' =&gt; $id ));
</code></pre>

<h2>Update</h2>

<p>The following lines runs:</p>

<pre><code>UPDATE authors SET name = 'Rename' WHERE name = 'Mary'

$ret = \tests\Author::update(array( 'name' =&gt; 'Rename' ))
    -&gt;where()
    -&gt;equal('name','Mary')
    -&gt;execute();
</code></pre>

<h2>Delete</h2>

<pre><code>$ret = \tests\Author::delete()
    -&gt;where()
    -&gt;equal('name','Rename')
    -&gt;execute();
</code></pre>

</body>
</html>