<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
        body { 
        padding: 15px 30px; 
        background-color: #ccc;
        font-family: sans-serif;
    }
    a { color: blue; }
    h1, h2, h3, h4 { 
        color: #232323;
        text-shadow: #ddd 1px 1px 1px;
    }
    p { 
        color: #333;
        text-shadow: #ccc 1px 1px 1px;
    }
    pre { 
        background: #ddd;
        border-radius: 10px;
        border: 1px solid #999;
        box-shadow: #666 -2px -2px 5px;
        padding: 10px;
    }
    code { 
        font-family: Monaco, Monospace, Courier New;
        font-size: 0.8em;
    }
    table { background: #aaa; }
    table td { 
        background: #eee; 
        color: #111;
        padding: 3px 6px;
        min-width: 200px;
    }
    </style>
</head>
<body>
<h1>Collection</h1>

<p>Iterating:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$authors&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">AuthorCollection</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach(&nbsp;</span><span style="color: #0000BB">$authors&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$items&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$authors</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">items</span><span style="color: #007700">();&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;an&nbsp;array<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$authors</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">size</span><span style="color: #007700">();&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;item&nbsp;size<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<p>Where condition:</p>

<pre class="php"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$names&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">NameCollection</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$names</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">where</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">equal</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">groupBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #DD0000">'address'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></pre>

<p>Filter:</p>

<pre><code>$newCollection = $names-&gt;filter(function($item) { return true });
$newCollection-&gt;filter(function($item) { 
        return $item-&gt;confirmed;
});
</code></pre>

<p>Each:</p>

<pre><code>$names-&gt;each(function($item) {
    $item-&gt;update(array( .... ));
});
</code></pre>

<p>To get schema proxy class from collection class:</p>

<pre><code>$authors = new AuthorCollection;
$class = AuthorCollection::schema_proxy_class;
$class = $authors::schema_proxy_class;
</code></pre>

<p>To get model class:</p>

<pre><code>$class = AuthorCollection::model_class;
$class = $authors::model_class;
</code></pre>

<p>Collection pager:</p>

<pre><code>/* page 1, 10 per page */
$authors = new AuthorCollection;
$pager = $authors-&gt;pager(1,10);

$pager = $authors-&gt;pager();
$items = $pager-&gt;items();

$pager-&gt;next(); // next page
</code></pre>

</body>
</html>